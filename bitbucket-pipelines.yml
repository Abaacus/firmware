
image: stronglytyped/arm-none-eabi-gcc

pipelines:
    pull-requests:
        - step:
            name: 'Download common-all'
            script:
                - git submodule init
                - git submodule update
            artifacts:
                - common-all/**
        - step:
            image: python:2.7
            name: 'Build autogenerated files'
            script:
                - pip install -r common-all/requirements.txt
                - make autogen
            artifacts:
                - Gen/**

        - parallel:
            - step:
                name: 'Build release binary'
                script:
                    - make -j8 release
            - step:
                name: 'Build debug binary'
                script:
                    - make -j8 debug

